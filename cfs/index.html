
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Tim Fowler">
      
      
      
        <link rel="prev" href="../cosmos/">
      
      
        <link rel="next" href="../build_your_own/">
      
      
      <link rel="icon" href="../Logo.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.13">
    
    
      
        <title>0x02 - Core Flight System - ETHOS Labs - BYOS</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#nasas-core-flight-system-cfs" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="ETHOS Labs - BYOS" class="md-header__button md-logo" aria-label="ETHOS Labs - BYOS" data-md-component="logo">
      
  <img src="../Logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ETHOS Labs - BYOS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              0x02 - Core Flight System
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="red"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ETHOS Labs - BYOS" class="md-nav__button md-logo" aria-label="ETHOS Labs - BYOS" data-md-component="logo">
      
  <img src="../Logo.png" alt="logo">

    </a>
    ETHOS Labs - BYOS
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0x00 - Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cosmos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0x01 - OpenC3 Cosmos
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    0x02 - Core Flight System
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    0x02 - Core Flight System
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#deploying-nasas-cfs" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying NASA's cFS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#removing-cfs-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Removing cFS Plugin
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    0x03 - B.Y.O.S
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            0x03 - B.Y.O.S
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../build_your_own/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Build Your Own Satellite
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bring_your_own/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bring Your Own Satellite
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#deploying-nasas-cfs" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying NASA's cFS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#removing-cfs-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Removing cFS Plugin
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="nasas-core-flight-system-cfs">NASA's Core Flight System (cFS)</h1>
<figure>
<p><img alt="alt text" src="../image-33.png" /></p>
</figure>
<p>NASA's Core Flight System (cFS) is a platform for spacecraft flight software development. It's designed to be a highly reusable, scalable, and configurable system that can support various spaceflight missions, including satellites, spacecraft, and other space-related applications. The cFS consists of a core set of reusable software components known as the Core Flight Executive (cFE), which provides the infrastructure for building flight software applications. These applications can perform various functions such as data collection, spacecraft control, and communication.</p>
<p>One of the key features of the cFS is its modular architecture, which allows developers to add or modify components according to the specific needs of their mission without altering the core system. This modularity and configurability make the cFS a cost-effective and efficient solution for spaceflight software development.</p>
<p>The cFS is released under the NASA Open Source Agreement (NOSA), making it freely available for anyone to use, modify, and distribute. This openness has facilitated a growing community of users and contributors from NASA, other government agencies, industry, and academia, who collaborate to improve and expand the system's capabilities.</p>
<p>By providing a robust, flexible foundation for flight software development, the cFS supports NASA's missions and objectives in exploring space, advancing our understanding of the universe, and developing the technologies needed for future space exploration.</p>
<h2 id="deploying-nasas-cfs">Deploying NASA's cFS</h2>
<p>The first satellite you will be deploying will be a instance of cFS running in a Docker container. This is not fully functional or operational but is a great example of what is possible using and open-source, flight proven software, in a virtual environment. </p>
<p>To get started, you need to pull the cFS Docker container from the Docker Hub, using the following command:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>docker pull hackethos/cfs
</span></code></pre></div>
<figure>
<p><img alt="alt text" src="../image-11.png" />
  </p>
<figcaption>Pulling cFS Docker Container</figcaption>
</figure>
<p>Once the container image has been downloaded successfully, you can launch the container using the following command:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>docker<span class="w"> </span>run<span class="w"> </span>--cap-add<span class="w"> </span>CAP_SYS_RESOURCE<span class="w"> </span>--net<span class="o">=</span>openc3-cosmos-network<span class="w"> </span>--name<span class="w"> </span>cfs<span class="w"> </span>-p1234:1234/udp<span class="w"> </span>-p1235:1235<span class="w"> </span>--rm<span class="w"> </span>hackethos/cfs
</span></code></pre></div>
<figure>
<p><img alt="alt text" src="../image-12.png" />
  </p>
<figcaption>Starting cFS Docker Container</figcaption>
</figure>
<p>After running the previous command, you should see out from the container that looks like what is shown below.</p>
<figure>
<p><img alt="alt text" src="../image-13.png" />
  </p>
<figcaption>cFS Container Running</figcaption>
</figure>
<p>Now that your cFS container is running, you need to generate a plugin for COSMOS that will allow COSMOS to be able to talk to cFS and vice-versus. </p>
<p>If you want to see the entire process, expand the <code>Long Version</code> section below but for the purpose of this workshop, you can skip that section.</p>
<details class="long-version">
<summary>Long-version</summary>
<p>To generate a plugin for cFS to work with COSMOS you need to start with the following command from the <code>cosmos</code> directory.</p>
<p><div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>./openc3.sh cli generate plugin CFS
</span></code></pre></div>
<figure markdown>
<img alt="alt text" src="../image-16.png" />
<figcaption>Generating cFS Plugin for COSMOS</figcaption>
</figure></p>
<p>Next, you need to <code>cd</code> into the newly created plugin directory to generate a target with the following commands:</p>
<p><div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>cd openc3-cosmos-cfs/
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>../openc3.sh cli generate target CFS
</span></code></pre></div>
<figure markdown>
<img alt="alt text" src="../image-17.png" />
<figcaption>Generating cFS Target</figcaption>
</figure></p>
<p>Now, in your favorite text editor of choice, open the <code>plugin.txt</code> file and <strong>replace</strong> the contents with the following:</p>
<p><div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>VARIABLE<span class="w"> </span>ip<span class="w"> </span><span class="m">127</span>.0.0.1
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>VARIABLE<span class="w"> </span>port_tm<span class="w"> </span><span class="m">1235</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>VARIABLE<span class="w"> </span>port_tc<span class="w"> </span><span class="m">1234</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>VARIABLE<span class="w"> </span>cfs_target_name<span class="w"> </span>CFS
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>TARGET<span class="w"> </span>CFS<span class="w"> </span>&lt;%<span class="o">=</span><span class="w"> </span>cfs_target_name<span class="w"> </span>%&gt;
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="c1"># hostname   write_dest_port   read_port   write_src_port   interface_address   ttl   write_timeout   read_timeout   bind_address</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>INTERFACE<span class="w"> </span>&lt;%<span class="o">=</span><span class="w"> </span>cfs_target_name<span class="w"> </span>%&gt;_INT<span class="w"> </span>udp_interface.rb<span class="w"> </span>&lt;%<span class="o">=</span><span class="w"> </span>ip<span class="w"> </span>%&gt;<span class="w"> </span>&lt;%<span class="o">=</span><span class="w"> </span>port_tc<span class="w"> </span>%&gt;<span class="w"> </span>&lt;%<span class="o">=</span><span class="w"> </span>port_tm<span class="w"> </span>%&gt;<span class="w"> </span>nil<span class="w"> </span>nil<span class="w"> </span><span class="m">128</span><span class="w"> </span>nil<span class="w"> </span>nil
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>MAP_TARGET<span class="w"> </span>&lt;%<span class="o">=</span><span class="w"> </span>cfs_target_name<span class="w"> </span>%&gt;
</span></code></pre></div>
Save that file and then navigate to the <code>targets/CFS/cmd_tlm</code> directory and issue the following commands:</p>
<p><div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>cd targets/CFS/cmd_tlm/
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>rm *
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>touch cfs_cmds.txt cfs_tlm.txt to_lab_cmds.txt
</span></code></pre></div>
<figure markdown>
<img alt="alt text" src="../image-18.png" />
<figcaption>Creating Empty Files for Packet Definitions</figcaption>
</figure></p>
<p>Now you will create your first packet definition by opening the file <code>to_lab_cmds.txt</code> and insert the following content.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>COMMAND CFS TO_LAB_ENABLE BIG_ENDIAN &quot;Enable telemetry&quot;
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>#                   NAME      BITS TYPE   min VAL     max VAL    init VAL  DESCRIPTION
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>APPEND_ID_PARAMETER STREAM_ID  16  UINT   0x1880      0x1880     0x1880    &quot;Stream ID&quot;
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>    FORMAT_STRING &quot;0x%04X&quot;
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>APPEND_PARAMETER    SEQUENCE   16  UINT   0xC000      MAX_UINT16 0xC000    &quot;&quot;
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>    FORMAT_STRING &quot;0x%04X&quot;
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>APPEND_PARAMETER    PKT_LEN    16  UINT   0x0001      0xFFFF     0x0012    &quot;length of the packet&quot;
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>APPEND_PARAMETER    CMD_ID      8  UINT   6           6          6         &quot;&quot;
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>APPEND_PARAMETER    CHECKSUM    8  UINT   MIN_UINT8   MAX_UINT8  0x98      &quot;&quot;
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>    FORMAT_STRING &quot;0x%2X&quot;
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>APPEND_PARAMETER    DEST_IP   144  STRING &quot;127.0.0.1&quot;                      &quot;Destination IP, i.e. 172.16.9.112, pc-57&quot;
</span></code></pre></div>
<p>Next, open the file <code>cfs_cmds.txt</code> and insert the following content.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>COMMAND CFS NOOP BIG_ENDIAN &quot;NOOP Command&quot;
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a># cFS primary header
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>APPEND_ID_PARAMETER    STREAM_ID   16   UINT   0x1882      0x1882      0x1882      &quot;Packet Identification&quot;
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>    FORMAT_STRING &quot;0x%04X&quot;
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>APPEND_PARAMETER       SEQUENCE    16   UINT   MIN_UINT16  MAX_UINT16  0xC000      &quot;&quot;
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>    FORMAT_STRING &quot;0x%04X&quot;
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>APPEND_PARAMETER       PKT_LEN     16   UINT   0x0001      0x0001      0x0001      &quot;Packet length&quot;
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a># cFS CMD secondary header
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>APPEND_PARAMETER       CMD_ID       8   UINT   0           0           0           &quot;&quot;
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>APPEND_PARAMETER       CHECKSUM     8   UINT   MIN_UINT8   MAX_UINT8   MIN_UINT8   &quot;&quot;
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>COMMAND CFS RESET BIG_ENDIAN &quot;Reset Counters Command&quot;
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>APPEND_ID_PARAMETER    STREAM_ID   16   UINT   0x1882      0x1882      0x1882      &quot;Packet Identification&quot;
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>    FORMAT_STRING &quot;0x%04X&quot;
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>APPEND_PARAMETER       SEQUENCE    16   UINT   MIN_UINT16  MAX_UINT16  0xC000      &quot;&quot;
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>    FORMAT_STRING &quot;0x%04X&quot;
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>APPEND_PARAMETER       PKT_LEN     16   UINT   0x0001      0x0001      0x0001      &quot;Packet length&quot;
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>APPEND_PARAMETER       CMD_ID       8   UINT   1           1           1           &quot;&quot;
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>APPEND_PARAMETER       CHECKSUM     8   UINT   MIN_UINT8   MAX_UINT8   MIN_UINT8   &quot;&quot;
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>COMMAND CFS PROCESS BIG_ENDIAN &quot;Process Command&quot;
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a>APPEND_ID_PARAMETER    STREAM_ID   16   UINT   0x1882      0x1882      0x1882      &quot;Packet Identification&quot;
</span><span id="__span-7-23"><a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>    FORMAT_STRING &quot;0x%04X&quot;
</span><span id="__span-7-24"><a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a>APPEND_PARAMETER       SEQUENCE    16   UINT   MIN_UINT16  MAX_UINT16  0xC000      &quot;&quot;
</span><span id="__span-7-25"><a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a>    FORMAT_STRING &quot;0x%04X&quot;
</span><span id="__span-7-26"><a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a>APPEND_PARAMETER       PKT_LEN     16   UINT   0x0001      0x0001      0x0001      &quot;Packet length&quot;
</span><span id="__span-7-27"><a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a>APPEND_PARAMETER       CMD_ID       8   UINT   2           2           2           &quot;&quot;
</span><span id="__span-7-28"><a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a>APPEND_PARAMETER       CHECKSUM     8   UINT   MIN_UINT8   MAX_UINT8   MIN_UINT8   &quot;&quot;
</span></code></pre></div>
<p>Finally, you need to open the file <code>cfs_tlm.txt</code> and insert the following content</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>TELEMETRY CFS HK BIG_ENDIAN &quot;housekeeping telemetry&quot;
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>#                NAME       BITS  TYPE    ID      DESCRIPTION
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>APPEND_ID_ITEM   STREAM_ID   16   UINT    0x0883  &quot;Stream ID&quot;
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>    FORMAT_STRING &quot;0x%04X&quot;
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>APPEND_ITEM      SEQUENCE    16   UINT            &quot;Packet Sequence&quot;
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>    FORMAT_STRING &quot;0x%04X&quot;
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>APPEND_ITEM      PKT_LEN     16   UINT            &quot;Length of the packet&quot;
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a># telemetry secondary header
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>APPEND_ITEM      SECONDS     32   UINT            &quot;&quot;
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>        UNITS Seconds sec
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>APPEND_ITEM      SUBSECS     16   UINT            &quot;&quot;
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>        UNITS Milliseconds ms
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a># some bytes not known for what
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>APPEND_ITEM      SPARE2ALIGN 32   UINT            &quot;Spares&quot;
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a># payload
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a>APPEND_ITEM      CMD_ERRS     8   UINT            &quot;Command Error Counter&quot;
</span><span id="__span-8-17"><a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a>APPEND_ITEM      CMD_CNT      8   UINT            &quot;Command Counter&quot;
</span><span id="__span-8-18"><a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a># spare / alignment
</span><span id="__span-8-19"><a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a>APPEND_ITEM      SPARE       16   UINT            &quot;Spares&quot;
</span></code></pre></div>
<p>Lastly, you need to navigate to the root directory of your plugin and build the plugin using the following command:</p>
<p><code>cd ../../../</code> and <code>../openc3.sh cli rake build VERSION=1.0.0 .</code></p>
<p><figure markdown>
<img alt="alt text" src="../image-19.png" />
<figcaption>Building cFS COSMOS Plugin</figcaption>
</figure></p>
</details>
<p>If you skipped the <code>Long Version</code> you will need to download the pre-generated cFS plugin for COSMOS using the following command or downloading it from the lik that follows. If you use the link, download it from your browser in your VM.</p>
<p><code>wget https://byos.ethoslabs.space/openc3-cosmos-cfs-1.0.0.gem</code></p>
<p>Click Here: <a href="../openc3-cosmos-cfs-1.0.0.gem">Download cFS Plugin</a></p>
<figure>
<p><img alt="alt text" src="../image-20.png" />
  </p>
<figcaption>Downloading Pre-generated Plugin</figcaption>
</figure>
<p>The next step in the process is to grab the IP addresses of both your <code>cFS</code> container as well as the <code>openc3-operator</code> container. You can do this by running the following command and searching the output.</p>
<p><code>docker network inspect openc3-cosmos-network</code></p>
<p>Below is an example of cFS Container IP you may see.</p>
<figure>
<p><img alt="alt text" src="../image-14.png" />
  </p>
<figcaption>cFS Container IP Address</figcaption>
</figure>
<p>Below is an example of the Operator Container IP you may see</p>
<figure>
<p><img alt="alt text" src="../image-15.png" />
  </p>
<figcaption>OpenC3 Operator Container IP Address</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Your IP addresses may not be in the 172.18.x.x range. That is okay.</p>
</div>
<p>Now you will need to go back to COSMOS in your VM and click on the <code>Admin Console</code> section in the left side menu.</p>
<figure>
<p><img alt="alt text" src="../image-21.png" width="900" />
  </p>
<figcaption>Admin Console in COSMOS</figcaption>
</figure>
<p>Then in the middle section, click on the area where is says <code>Click to select plugin...</code></p>
<figure>
<p><img alt="alt text" src="../image-22.png" width="900" />
  </p>
<figcaption>Click to Install Plugin</figcaption>
</figure>
<p>A file selection popup will appear, and you will need to navigate to where you cFS plugin is located and select it.</p>
<figure>
<p><img alt="alt text" src="../image-23.png" width="900" />
  </p>
<figcaption>Select cFS Plugin Gem file</figcaption>
</figure>
<p>After you select your plugin file, you will get prompted to configure the plugin. Here you will need to supply the IP address of your <code>cFS</code> container as shown below.</p>
<figure>
<p><img alt="alt text" src="../image-24.png" width="900" />
  </p>
<figcaption>Set IP Varible to cFS Container IP</figcaption>
</figure>
<p>After entering the IP address, you can click <code>Install</code>. It will take a few moments for the plugin to be processed but you should see a message that states the process was completed.</p>
<p>Once completed, you can navigate to the <code>CmdTlmServer</code> section of COSMOS where you will see the <code>CFS_INT</code> interface has been configured and connected.</p>
<figure>
<p><img alt="alt text" src="../image-25.png" width="900" />
  </p>
<figcaption>CFS_INT Connected in COSMOS</figcaption>
</figure>
<p>Next, you need to navigate to the <code>Command Sender</code> section from the left menu. ONce there, make sure that CFS is selected as the target and then select the <code>TO_LAB_ENABLE</code> Packet. With that packet selected, you will see a field called <code>DEST_IP</code> that you will need to populate with the <code>openc3-operator</code> container IP address, <strong>making sure to preserve the single quotes.</strong></p>
<figure>
<p><img alt="alt text" src="../image-26.png" width="900" />
  </p>
<figcaption>Setting DEST_IP Address in TO_LAB_ENABLE Command</figcaption>
</figure>
<p>Now you are ready to click <code>SEND</code>. In doing so, you should see an output like the one below.</p>
<figure>
<p><img alt="alt text" src="../image-27.png" width="900" />
  </p>
<figcaption>Sending Telecommand Packet</figcaption>
</figure>
<p>Now, switch over to your terminal running cFS and you should see that the command was successfully received.</p>
<figure>
<p><img alt="alt text" src="../image-28.png" width="900" />
  </p>
<figcaption>cFS Container Showing Telemetry Output Enabled</figcaption>
</figure>
<p>Now, back in COSMOS, if you navigate to the <code>CmdTlmServer</code> you should see that the <code>CFS_INT</code> interface is receiving TLM Packets.</p>
<figure>
<p><img alt="alt text" src="../image-29.png" width="900" />
  </p>
<figcaption>COSMOS Receiving TLM Packets from cFS</figcaption>
</figure>
<p>As stated previously, this implementation of cFS is not feature complete but does demonstrate the fundamental concepts of telecommands and telemetry in a space system.</p>
<hr />
<h2 id="removing-cfs-plugin">Removing cFS Plugin</h2>
<p>For the next section of this workshop, you will use the same port binding that your cFS container is currently using, so you need to do a little clean up to get ready. </p>
<p>First, you will navigate to the <code>Admin Console</code> section of COSMOS and find the cFS plugin and click on the trash can icon.</p>
<figure>
<p><img alt="alt text" src="../image-30.png" width="900" />
  </p>
<figcaption>Deleting cFS Plugin from Admin Console</figcaption>
</figure>
<p>When prompted, click on <code>Delete</code> to remove the plugin from COSMOS.</p>
<figure>
<p><img alt="alt text" src="../image-31.png" width="900" />
  </p>
<figcaption>Click Delete</figcaption>
</figure>
<p>Next, you need to switch over to your terminal running cFS and stop it using <code>CRTL + c</code></p>
<figure>
<p><img alt="alt text" src="../image-32.png" width="900" />
  </p>
<figcaption>CTRL + c Terminating cFS Container</figcaption>
</figure>
<p>Once cFS stops, the container will be removed but can be redeployed at any time.</p>







  
  




  



                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Â© 2024, ETHOS Labs, LLC  - Please Do Not Redistribute
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "content.code.copy"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c8d2eff1.min.js"></script>
      
    
  </body>
</html>